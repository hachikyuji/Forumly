{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Social Learning App</title>
    <link rel="stylesheet" href="{% static 'styles/forms.css' %}">
</head>
<body>
    <div class="form-container" style="background-image: url('/static/assets/BG1.gif'); background-size: 500px 300px;">
    
        <!-- Centered title -->
        <div class="app-title">
            <h1>Register your Account!</h1>
        </div>
    
        <div class="card-wrapper">
            <form method="POST" novalidate>
                {% csrf_token %}
                <h2>Create Account</h2>
    
                <!-- Username Input -->
                <div class="input-wrapper">
                    <label for="username">Username</label>
                    <div class="input-container">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zM2 14s0-2 6-2 6 2 6 2H2z"/>
                        </svg>
                        <input 
                            id="username" 
                            type="text" 
                            name="username" 
                            minlength="3" 
                            class="{% if form.username.errors %}input-error{% endif %}"
                            required 
                        />
                    </div>
                    {% if form.username.errors %}
                        <p class="input-hint error">{{ form.username.errors.0 }}</p>
                    {% endif %}
                </div>
    
                <!-- Password Input -->
                <div class="input-wrapper">
                    <label for="password">Password</label>
                    <div class="input-container" style="position: relative;">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 1a4 4 0 0 0-4 4v2H2a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1h-2V5a4 4 0 0 0-4-4zM6 5a2 2 0 1 1 4 0v2H6V5zm8 9H2V8h12v6z"/>
                        </svg>
                        <input 
                            id="password" 
                            type="password" 
                            name="password" 
                            minlength="8" 
                            class="{% if form.password.errors %}input-error{% endif %}" 
                            required 
                        />
                        <button type="button" class="eye-toggle" onclick="togglePassword('password', this)">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#888" viewBox="0 0 16 16">
                                <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/>
                                <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5z"/>
                            </svg>
                        </button>
                    </div>
                    {% if form.password.errors %}
                        <p class="input-hint error">{{ form.password.errors.0 }}</p>
                    {% endif %}
                </div>

                <!-- Confirm Password Input -->
                <div class="input-wrapper">
                    <label for="confirm_password">Confirm Password</label>
                    <div class="input-container" style="position: relative;">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 1a4 4 0 0 0-4 4v2H2a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1h-2V5a4 4 0 0 0-4-4zM6 5a2 2 0 1 1 4 0v2H6V5zm8 9H2V8h12v6z"/>
                        </svg>
                        <input 
                            id="confirm_password" 
                            type="password" 
                            name="confirm_password" 
                            minlength="8" 
                            required 
                        />
                        <button type="button" class="eye-toggle" onclick="togglePassword('confirm_password', this)">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#888" viewBox="0 0 16 16">
                                <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/>
                                <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5z"/>
                            </svg>
                        </button>
                    </div>
                    <p id="passwordMismatch" class="input-hint error" style="display: none;">Passwords do not match.</p>
                </div>


                <div class="input-wrapper">
                    <label for="age">Age</label>
                    <div class="input-container">
                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M5 1a1 1 0 0 0-1 1v2.5c0 .563.186 1.11.523 1.552L7 8l-2.477 1.948A2.5 2.5 0 0 0 4 11.5V14a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.5c0-.563-.186-1.11-.523-1.552L9 8l2.477-1.948A2.5 2.5 0 0 0 12 4.5V2a1 1 0 0 0-1-1H5zm1 2h4v1.5a.5.5 0 0 1-.2.4L8 6 6.2 4.9a.5.5 0 0 1-.2-.4V3zm0 10v-1.5a.5.5 0 0 1 .2-.4L8 10l1.8 1.1a.5.5 0 0 1 .2.4V13H6z"/>
                        </svg>                        
                        <input 
                            id="age"
                            type="number"
                            name="age"
                            minlength="1"
                            maxlength="2"
                            class="{% if form.age.errors %}input-error{% endif %}"
                            required
                        />
                        {% if form.age.errors %}
                            <p class="input-hint error">{{ form.age.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>

                <div class="input-wrapper">
                    <div class="terms-check">
                        <input type="checkbox" id="acceptTerms" name="acceptTerms" required>
                        <label for="acceptTerms">
                            I accept the <a href="#" onclick="openTermsModal(event)"> terms and conditions. </a>
                            <div id="termsContent">
                            </div>
                        </label>
                    </div>
                </div>
    
                <button type="submit" class="submit-button">
                    Register
                </button>
    
                {% if messages %}
                    <div class="message-container">
                        {% for message in messages %}
                            <p class="{% if 'success' in message.tags %}success-message{% else %}error-message{% endif %}">
                                {{ message }}
                            </p>
                        {% endfor %}
                    </div>
                {% endif %}
    
                <p class="login-link">
                    Already have an account? <a href="/">Login here</a>
                </p>
    
            </form>

            <div id="termsModal" class="modal">
                <div class="modal-content">
                    <span class="close-button" onclick="closeTermsModal()">&times;</span>
                    <h2>Terms and Conditions</h2>
                    <p><strong>Effective Date:</strong> April 21, 2025</p>
                    <p>Welcome to <strong>Forumly</strong>! A social learning platform designed to help users discover and engage with topics of interest through intelligent recommendations. By accessing or using Forumly, you agree to comply with and be bound by the following Terms and Conditions. Please read them carefully.</p>
            
                    <h3>1. Acceptance of Terms</h3>
                    <p>By creating an account or using our services, you confirm that you have read, understood, and agree to be bound by these Terms and Conditions and our Privacy Policy. If you do not agree with any part of these terms, you may not use the application.</p>
            
                    <h3>2. Eligibility</h3>
                    <ul>
                        <li>Be at least 13 years of age or have parental/guardian consent, in accordance with an international law which is from the US Children's Online Privacy Protection Act (COPPA) as a standard to online platforms.</li>
                        <li>Provide accurate and complete registration information, including a unique username, password, and age.</li>
                    </ul>
            
                    <h3>3. Account Responsibilities</h3>
                    <p>You are responsible for maintaining the confidentiality of your account credentials. You agree not to:</p>
                    <ul>
                        <li>Share your login details with others.</li>
                        <li>Use another person’s account.</li>
                        <li>Engage in behavior that disrupts the experience of other users or violates applicable laws.</li>
                    </ul>
            
                    <h3>4. Data Collection and Usage</h3>
                    <p>We collect and process the following types of data:</p>
                    <strong>a. User-Provided Data:</strong>
                    <ul>
                        <li>Username</li>
                        <li>Password</li>
                        <li>Age</li>
                    </ul>
                    <p><em>*These are required to create and manage your account.</em></p>
            
                    <strong>b. Engagement and Interaction Data:</strong>
                    <ul>
                        <li>Time spent on topics (measured to understand interest levels).</li>
                        <li>Like and dislike counts for each topic.</li>
                        <li>User comments, which may be analyzed to determine tone (positive, negative, or neutral).</li>
                    </ul>
            
                    <strong>c. Algorithmic Processing:</strong>
                    <p>Our Q-learning algorithm utilizes the above data (section b) to:</p>
                    <ul>
                        <li>Improve the relevance of topic recommendations.</li>
                        <li>Enhance the learning environment for adaptive content delivery.</li>
                        <li>Continuously refine its decision-making model based on user interaction feedback.</li>
                    </ul>
                    <p><em>*All data is processed with the goal of personalizing and enhancing your experience on the platform.</em></p>
            
                    <h3>5. User Conduct</h3>
                    <p>You agree to use Forumly responsibly. You must not:</p>
                    <ul>
                        <li>Post content that is offensive, hateful, or violates any law.</li>
                        <li>Attempt to reverse-engineer or interfere with our Q-learning system or other parts of the service.</li>
                        <li>Exploit or harm other users or the integrity of the platform.</li>
                    </ul>
            
                    <h3>6. Intellectual Property</h3>
                    <p>Users retain ownership of their comments and contributions but grant Forumly a non-exclusive, royalty-free license to use, reproduce, and display such content within the application.</p>
            
                    <h3>7. Termination</h3>
                    <p>We reserve the right to suspend or terminate your account at any time for violations of these Terms and Conditions or behavior deemed harmful to the platform or its users.</p>
            
                    <h3>8. Modifications to Terms</h3>
                    <p>We may revise these Terms and Conditions at any time. You will be notified of significant changes, and continued use of the platform after such changes will constitute your acceptance of the updated terms.</p>
            
                    <h3>9. Disclaimer and Limitation of Liability</h3>
                    <p>Forumly is provided on an “as is” basis. We do not guarantee continuous availability or the accuracy of recommended content.</p>
                    <p>We are not liable for any damages arising from the use of the platform, including but not limited to data loss, algorithmic errors, or misuse of information.</p>
            
                    <h3>10. Contact Us</h3>
                    <p>For questions regarding these Terms and Conditions, please contact us at:</p>
                    <p>Email: <a href="mailto:jmdvilladores2021@plm.edu.ph">jmdvilladores2021@plm.edu.ph</a>, <a href="mailto:jcdmuring2021@plm.edu.ph">jcdmuring2021@plm.edu.ph</a></p>
                </div>
            </div>            

        </div>
    </div>
</body>

<script>
    function openTermsModal(e){
        e.preventDefault();
        const modal = document.getElementById("termsModal");
        modal.classList.add("show");
    }

    function closeTermsModal(){
        const modal = document.getElementById("termsModal");
        modal.classList.remove("show");
    }

    window.onclick = function(event) {
        const modal = document.getElementById("termsModal");
        if (event.target === modal) {
            closeTermsModal();
        }
    }

    function togglePassword(fieldId, button) {
        const input = document.getElementById(fieldId);
        const icon = button.querySelector("svg");

        if (input.type === "password") {
            input.type = "text";
            icon.style.fill = "#000"; 
        } else {
            input.type = "password";
            icon.style.fill = "#888";
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        const password = document.getElementById("password");
        const confirm = document.getElementById("confirm_password");
        const warning = document.getElementById("passwordMismatch");

        function checkMatch() {
            if (password.value && confirm.value && password.value !== confirm.value) {
                warning.style.display = "block";
            } else {
                warning.style.display = "none";
            }
        }

        password.addEventListener("input", checkMatch);
        confirm.addEventListener("input", checkMatch);
    });

</script>
</html>
